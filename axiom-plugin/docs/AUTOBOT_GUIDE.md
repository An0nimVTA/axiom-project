# Автоматический тест бот для AXIOM плагина

## Описание
Система автоматического тестирования (автобот) позволяет проверять корректность работы всех основных функций плагина AXIOM без участия человека.

## Установка и настройка

### 1. Сборка плагина
```bash
cd axiom-plugin
mvn clean package
```

### 2. Установка на сервер
- Скопировать `target/axiom-geopolitical-engine-*.jar` в папку `plugins/` сервера
- Перезапустить сервер

### 3. Подготовка к тестированию
- Убедиться, что на сервере есть как минимум 2 игрока для тестов
- Убедиться, что у тестового аккаунта есть права OP

## Команды автобота

### Основные команды
- `/testbot run` - запустить все тесты
- `/testbot run <тест>` - запустить конкретный тест
- `/testbot list` - показать список доступных тестов
- `/testbot help` - показать справку

### Примеры использования

#### Запуск всех тестов
```
/testbot run
```

#### Запуск конкретного теста
```
/testbot run "Проверка баланса игрока"
```

#### Проверка списка тестов
```
/testbot list
```

## Доступные тесты

### Экономические тесты
- Проверка баланса игрока
- Перевод между игроками
- Банковская система
- Торговля

### Национальные тесты
- Создание нации
- Захват территории
- Приглашение участников
- Проверка существования нации

### Дипломатические тесты
- Проверка дипломатических отношений
- Заключение договоров
- Создание альянсов

### Боевые тесты
- Проверка боевой системы
- Система осад
- Рейды

## Запуск через скрипт

### Linux/Mac
```bash
cd axiom-plugin/testbot
chmod +x run_tests.sh
./run_tests.sh
```

### Ручной запуск
```bash
cd axiom-plugin/testbot
chmod +x build_and_test.sh
./build_and_test.sh test
```

## Интеграция с CI/CD

Для автоматизации тестирования:

1. Соберите плагин: `mvn clean package`
2. Запустите тестовый сервер
3. Выполните команду: `/testbot run`
4. Проверьте результаты в логах

## Создание новых тестов

Для добавления новых тестов:

1. Откройте `src/main/java/com/axiom/test/TestBot.java`
2. Найдите соответствующий TestSuite
3. Добавьте новый TestCase в список тестов
4. Реализуйте логику теста

Пример нового теста:
```java
testCases.add(new TestCase() {
    @Override
    public String getName() {
        return "Название теста";
    }
    
    @Override
    public boolean execute(CommandSender sender) {
        // Логика теста
        return результат_теста;
    }
});
```

## Отладка тестов

Если тест не проходит:
1. Проверьте логи сервера
2. Убедитесь, что у тестового игрока есть необходимые права
3. Проверьте зависимости между тестами
4. Проверьте предварительные условия теста

## Статистика тестирования

После выполнения тестов выводится статистика:
- Общее количество тестов
- Количество пройденных тестов
- Процент успешного прохождения
- Список проваленных тестов (если есть)

Пример вывода:
```
[AXIOM] Запуск автоматических тестов...
Тестирование: Экономическая система
  ✓ Проверка баланса игрока
  ✓ Перевод между игроками
Тестирование: Национальная система
  ✓ Создание нации
  ✓ Проверка существования нации
[AXIOM] Тестирование завершено: 4/4 тестов пройдено (100%)
```

## Планирование регрессионных тестов

Рекомендуется запускать тесты:
- После каждого обновления плагина
- Перед каждым релизом
- При обнаружении багов
- После изменений в зависимостях