# AXIOM — обзор текущего проекта

Этот документ описывает текущее состояние проекта, его архитектуру, компоненты, сборку, тестирование и ключевые файлы.

## 1) Назначение и цели проекта

AXIOM — комплексная модификация для Minecraft 1.20.1, в которой:
- Серверная логика (нации, экономика, дипломатия, войны) реализована плагинами.
- Клиентский интерфейс (GUI вместо чат‑команд) реализован Forge‑модом.
- Игра запускается через переносной лаунчер (Portable), без установки Java пользователем.

Основные цели зафиксированы в `docs/PROJECT_SPEC.md`:
- Гибрид Mohist: Forge Mods + Spigot/Paper Plugins.
- Правило цепи: крупные моды должны быть взаимозависимыми.
- GUI‑first: минимум чат‑команд, максимум экранов.
- Автотесты — обязательны.

## 2) Архитектура (кратко)

- **Сервер:** Mohist 1.20.1 (Hybrid Forge + Spigot).
- **Плагины:** Java 17+, Spigot API.
- **Клиент:** Forge 1.20.1 + UI‑мод.
- **Лаунчер:** Kotlin + JavaFX, запускает игру и подключается к серверу.
- **Backend (отдельно):** Ktor‑сервер для API/авторизации (если используется).

## 3) Основные компоненты и папки

### Ядро проекта
- `axiom-core/` — базовые сервисы и общие сущности модульной серверной части.
- `axiom-plugin/` — основной плагин сервера (Spigot), сборка `AXIOM.jar`.
- `axiom-nations/` — модуль наций/территорий.
- `axiom-economy/` — модуль экономики.
- `axiom-diplomacy/` — модуль дипломатии.
- `axiom-military/` — модуль войны/боевых механик.
- `axiom-technology/` — модуль технологий.

Модули подключены в родительском `pom.xml`.

### Клиент и интерфейс
- `axiom-mod-integration/` — Forge‑мод интерфейса (GUI вместо чат‑команд).
- `UI_CARD_ASSET_CATALOG.csv`, `UI_RELIGION_CARDS_SPEC.csv` — спецификации карточек/визуала.
- `minecraft/` — локальная инстанция (libraries, versions, assets, config, mods).

### Лаунчер
- `axiom-launcher-kotlin/` — Kotlin/JavaFX лаунчер.
- `launcher_config.json` — ключевая конфигурация (автозапуск, автотесты, адрес сервера).
- `build_portable/AxiomClient/` — готовый portable‑клиент (лаунчер + игра).

### Backend (если используется)
- `axiom-backend-kotlin/` — Ktor API + БД (PostgreSQL, Exposed, Hikari).

### Сервер
- `server/` — сборка сервера Mohist, папка `mods/`, `plugins/`, `start.sh`, `server.properties`.

### Баланс и конфиги
- `balance_config/` — конфиги баланса, включая `recipes.json`.

### Инструменты и скрипты
- `tools/` — утилиты (валидация, автотесты, упаковка).
- `assemble_release.sh`, `build_portable.sh`, `build.sh` — сборка и релизы.
- `upload_client_core.sh`, `update-vps.sh` — публикация обновлений на VPS.

## 4) Ключевые потоки (как всё работает)

### Запуск клиента
1) Лаунчер проверяет обновления и скачивает ядро.
2) Игра запускается с авто‑подключением к серверу.
3) Клиентский UI‑мод отображает меню и запрашивает данные у сервера пакетами.

### Запуск сервера
1) Mohist стартует Forge + Spigot среду.
2) Загружаются моды и плагины.
3) Плагин AXIOM инициализирует систему наций/экономики/войн.

## 5) Сборка и релизы

### Лаунчер
```bash
cd axiom-launcher-kotlin
./gradlew build
```

### Полный Portable‑релиз
```bash
bash assemble_release.sh
```

Результат: `build_portable/AxiomClient/`.

## 6) Тестирование и автотесты

Раннер автотестов:
```bash
python3 tools/axiom_test_runner.py --profile full
```

Быстрый прогон:
```bash
python3 tools/axiom_test_runner.py --profile fast
```

Отчёты:
- `reports/autotest-<timestamp>/` — логи, JUnit, summary.
- `server/plugins/AXIOM/test-reports/` — отчеты тестбота/автотеста.

Полное описание автотестов: `docs/AUTOTESTS_GUIDE_RU.md`.

## 7) Статус проекта

По `docs/ROADMAP.md` проект в **Beta**:
- Сейчас основной фокус: стабилизация модов и баланса, автотесты, UI.
- Далее: расширение серверной логики (нации/экономика/дипломатия).

## 8) Где смотреть подробности

- `docs/PROJECT_SPEC.md` — правила, архитектура, геймплей, UI.
- `docs/DEV_GUIDE.md` — сборка и разработка.
- `docs/USER_GUIDE.md` — инструкция игрока.
- `docs/ADMIN_GUIDE.md` — обновления и сервер.
- `docs/AUTOTESTS_GUIDE_RU.md` — автотесты.

---

Если хочешь, могу расширить этот документ:
- точным описанием всех команд/меню,
- схемой сетевых пакетов,
- реестром конфигов и ключевых классов,
- картой зависимостей модулей.
