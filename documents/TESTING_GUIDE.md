# Система автоматического тестирования AXIOM

## Описание

Система автоматического тестирования (автобот) позволяет проверять корректность работы всех основных функций плагина AXIOM без участия человека. Автобот может имитировать действия игрока и проверять корректность выполнения команд и систем.

## Команды автобота

### Основные команды
- `/testbot run` - запустить все тесты
- `/testbot run <тест>` - запустить конкретный тест
- `/testbot list` - показать список доступных тестов
- `/testbot help` - показать справку

### Доступные тесты

#### Экономические тесты
- `Проверка баланса игрока` - проверка корректности начального баланса
- `Перевод между игроками` - проверка системы переводов
- `Банковская система` - тестирование банковских операций

#### Национальные тесты
- `Создание нации` - проверка создания новой нации
- `Проверка существования нации` - проверка наличия нации у игрока
- `Захват территории` - тестирование функции claim

#### Дипломатические тесты
- `Проверка дипломатических отношений` - проверка системы отношений между нациями

#### Боевые тесты
- `Проверка боевой системы` - проверка инициализации боевых систем

## Использование

### В игре
1. Подключитесь к серверу с плагином AXIOM
2. Убедитесь, что у вас есть права оператора (OP)
3. Выполните команду `/testbot run` для запуска всех тестов
4. Наблюдайте за результатами в чате

### Через консоль сервера
Вы можете запускать тесты через консоль сервера:
```
testbot run
```

## Структура тестов

### Тест-кейс
Каждый тест включает:
- Название теста
- Описание цели теста
- Последовательность действий
- Ожидаемый результат
- Фактический результат

### Набор тестов
Наборы тестов объединяют связанные функции:
- `EconomyTestSuite` - экономические функции
- `NationTestSuite` - национальные функции
- `DiplomacyTestSuite` - дипломатические функции
- `WarfareTestSuite` - боевые функции

## Результаты тестирования

После выполнения тестов выводится статистика:
- Общее количество тестов
- Количество пройденных тестов
- Количество проваленных тестов
- Процент успешного прохождения

Пример вывода:
```
[AXIOM] Запуск автоматических тестов...
Тестирование: Экономическая система
  ✓ Проверка баланса игрока
  ✓ Перевод между игроками
Тестирование: Национальная система
  ✓ Создание нации
  ✓ Проверка существования нации
[AXIOM] Тестирование завершено: 4/4 тестов пройдено
```

## Интеграция в CI/CD

Для автоматизации тестирования в системах непрерывной интеграции:

1. Соберите плагин: `mvn clean package`
2. Запустите тестовый сервер
3. Выполните команду: `execute as @a run testbot run`
4. Проверьте код возврата (0 - успех, 1 - ошибка)

## Создание новых тестов

Чтобы добавить новый тест:

1. Создайте класс, реализующий интерфейс `TestBot.TestCase`
2. Добавьте его в соответствующий набор тестов (`TestSuite`)
3. Зарегистрируйте в `TestBot.initializeTestSuites()`

Пример нового теста:
```java
testCases.add(new TestCase() {
    @Override
    public String getName() {
        return "Название теста";
    }
    
    @Override
    public boolean execute(CommandSender sender) {
        // Логика теста
        return результат_теста;
    }
});
```

## Отладка тестов

Если тест не проходит:

1. Проверьте логи сервера
2. Убедитесь, что у тестового игрока есть необходимые права
3. Убедитесь, что предварительные условия теста выполнены
4. Проверьте зависимости между тестами

## Запуск регрессионных тестов

Для проверки совместимости после изменений:

1. `/testbot run` - полное тестирование
2. `/axiom test run all` - альтернативная команда через основной плагин
3. Автоматическая проверка при сборке через Maven (в будущем)

## Улучшения в будущем

- Тесты производительности
- Тесты нагрузки
- Генерация отчетов в HTML
- Интеграция с JUnit
- Скрипты автоматического развертывания для тестирования